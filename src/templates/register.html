<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Register | MoonChat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 4 (solo para forms / utils) -->
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">

    <!-- FontAwesome -->
    <link rel="stylesheet"
          href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='register.css') }}">
</head>

<body class="moon-bg">

    <div class="moon-card">

        <!-- HEADER -->
        <div class="text-center mb-4">
            <i class="fas fa-moon moon-icon"></i>
            <h3 class="mt-2">Create account</h3>
            <p class="text-muted small">Join MoonChat</p>
        </div>

        <!-- FLASH MESSAGES -->
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        <div class="alert alert-danger text-center">
            {{ messages[0] }}
        </div>
        {% endif %}
        {% endwith %}

        <!-- FORM -->
        <form action="/register" method="POST">

            <!-- Avatar uploader -->
            <div class="avatar-wrapper mb-4">
                <label for="img-uploader" class="avatar">
                    <img
                        id="img-preview"
                        src="{{ url_for('static', filename='img/avatar_img.png') }}"
                        alt="Avatar"
                    >
                    <div class="avatar-overlay">
                        <i class="fas fa-camera"></i>
                    </div>
                </label>

                <input type="file" id="img-uploader" hidden>
            </div>

            <div class="form-group">
                <input
                    name="username"
                    class="form-control moon-input"
                    placeholder="Username"
                    required
                >
            </div>

            <div class="form-group">
                <input
                    type="password"
                    id="password"
                    name="password"
                    class="form-control moon-input"
                    placeholder="Password"
                    required
                >
            </div>

            <div class="form-group">
                <input
                    type="password"
                    id="confirm-password"
                    class="form-control moon-input"
                    placeholder="Confirm password"
                    required
                >
                <small id="password-msg" class="form-text"></small>
            </div>

            <div class="form-group">
                <input
                    name="fullname"
                    class="form-control moon-input"
                    placeholder="Full name"
                >
            </div>

            <div class="form-group">
                <input
                    type="email"
                    name="email"
                    class="form-control moon-input"
                    placeholder="Email"
                >
            </div>

            <div class="form-group">
                <select name="sex" class="form-control moon-input">
                    <option value="">Sex</option>
                    <option value="M">Male</option>
                    <option value="F">Female</option>
                </select>
            </div>

            <!-- Hidden image url -->
            <input
                id="photo"
                name="image"
                class="form-control moon-input"
                hidden
            >

            <button
                type="submit"
                id="register-btn"
                class="btn btn-moon btn-block"
                disabled
            >
                Register
            </button>
        </form>

        <!-- FOOTER -->
        <div class="text-center mt-3">
            <small>Already have an account?</small><br>
            <a href="/login" class="moon-link">Login</a>
        </div>

    </div>

    <!-- JS (orden correcto) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>

    <script src="{{ url_for('static', filename='js/register.js') }}"></script>
    <script src="{{ url_for('static', filename='js/photo.js') }}"></script>

</body>
</html>
